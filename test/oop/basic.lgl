using "../glsl_defs.lgl";

frame model has dimension 3;

class d {
  protected int d_value;
};

class c : d {
  public int a;
  private cart3<model>.point b;

  public void __init__(int a, cart3<model>.point b, int d) {
    /* TODO can't parse field selectors without merging struct branch */
    /*this.a = a;*/
    /*this.b = b;*/
    /*this.d = d;*/
  }
  public int foo(int x) {
    return this.a + this.d_value + x;
  }
  public c bar(c x){
    return this.b + x.b;
  }
};

void main(){
  c my_c = c(1, [2.0, 3.0, 4.0]);

  /* TODO can't parse field selectors without merging struct branch */
  /*int x1 = c.a;*/
  /*c.a = x1;*/
  /*cart3<model>.point x2 = c.b;*/
  /*c.b = x2;*/
  /*int x3 = c.foo(10);*/
  /*cart3<model>.point x4 = c.bar([10.0, 10.0, 10.0]);*/
}
